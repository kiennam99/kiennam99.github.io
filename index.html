<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ragflow Example</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>Ragflow Example</h1>
    <!-- <div id="apiData">Loading data...</div> -->

    <div class="chat-container">
        <div class="chat-header">
            <h2>Chat with Bot</h2>
            <!-- Button to start a new conversation -->
            <button id="new-convo-btn" onclick="startNewConversation()">Start New Conversation</button>
        </div>
        <div class="chat-window" id="chat-window">
            <!-- Messages will appear here -->
            <div id="loading-indicator" class="hidden">Bot is typing...</div>
        </div>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Type your message..." disabled>
            <button onclick="sendMessage()" disabled>Send</button>
        </div>
    </div>
    <!-- <script src="script.js"></script> -->

    <script src="script.js"></script>
    <!-- <script>
        // URL of the API
        const requestOptions = {
            method: 'GET',
            headers: {
                "Authorization": "Bearer ragflow-JkYjZjZjZhNzBiYzExZWZhYmQ4MDI0Mm",
                "Accept": "application/json",
                "Content-Type": "application/json",
                "ngrok-skip-browser-warning": "69420",
            },
        };

        const apiUrl = 'https://1a70-140-113-113-65.ngrok-free.app/v1/';
        const new_conversation = apiUrl + 'api/new_conversation/';

        fetch(new_conversation, requestOptions)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network errorr');
                }
                return response.json();
            })
            .then(
                data => {
                    document.getElementById('apiData').innerText = JSON.stringify(data, null, 2);
                }
            )
            .catch(error => {
                console.error('Error:', error);
            })

        // Create an XMLHttpRequest object
        // const xhr = new XMLHttpRequest();

        // // Set up a request
        // xhr.open('GET', new_conversation, true);

        // // Define what happens on successful data submission
        // xhr.onload = function() {
        //     if (xhr.status >= 200 && xhr.status < 300) {
        //         console.log(xhr.responseText);
        //         const data = JSON.parse(xhr.responseText);
        //         document.getElementById('apiData').innerText = JSON.stringify(data, null, 2);
        //     } else {
        //         console.error('Request failed');
        //     }
        // };

        // // Define what happens in case of error
        // xhr.onerror = function() {
        //     console.error('There was a network error');
        // };

        // // Send the request
        // xhr.send();
    </script> -->
</body>

</html>